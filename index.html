
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>ä¸æƒ³çœ‹ç‰‡</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ctext y='.9em' font-size='90'%3EğŸ˜ˆ%3C/text%3E%3C/svg%3E">
    <link rel="stylesheet" href="https://googledonts.private.coffee/css2?family=LXGW+WenKai+TC&family=Zhi+Mang+Xing&display=swap">
    <style>
        :root{
            --primary:#e9eef8;
            --background:#02030a;
            --accent:#ff6b3d;
            --muted:rgba(40,44,60,0.55);
            --button-hover:#2b303c;
            --outline:rgba(255,107,61,0.6);
            --fixed:#ff5630;
            --page-max-width:1200px;
            --page-padding-x:clamp(16px,4vw,40px);
            --title-width:clamp(260px,56%,760px);
        }

        html,body{height:100%;}
        body{
            margin:0;
            padding:0;
            background-color:var(--background);
            color:var(--primary);
            font-family:"LXGW WenKai TC", system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            min-height:100vh;
            box-sizing:border-box;
            display:flex;
            flex-direction:column;
            overflow-x:hidden;
        }
        *,*::before,*::after{box-sizing:inherit;}

        /* é¡µé¢æ ‡é¢˜ä¿æŒåŸæ¥çš„ä¹¦å†™ä½“ */
        header{
            font-family:"Zhi Mang Xing", "LXGW WenKai TC", system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            font-size:2.6rem;
            font-weight:700;
            letter-spacing:3px;
            margin-top:64px;
            margin-bottom:4px;
            line-height:0.85;
        }

        #starfield{
            position:fixed;
            inset:0;
            width:100%;
            height:100%;
            z-index:0;
            display:block;
            pointer-events:none;
            background:transparent;
        }

        .container{
            flex:1;
            display:flex;
            flex-direction:column;
            width:100%;
            max-width:var(--page-max-width);
            margin-inline:auto;
            padding-left:var(--page-padding-x);
            padding-right:var(--page-padding-x);
            align-items:center;
            position:relative;
            z-index:1;
        }

        .title-box{
            width:var(--title-width);
            margin-inline:auto;
            text-align:center;
            display:block;
            word-break:keep-all;
        }

        .banner{
            width:100%;
            display:flex;
            flex-direction:column;
            align-items:center;
            margin-bottom:14px;
        }
        .banner h2{
            font-size:1.3rem;
            font-weight:600;
            margin-bottom:8px;
            color:var(--accent);
        }

        .category-btns{
            display:flex;
            gap:14px;
            margin-bottom:16px;
            justify-content:center;
            width:100%;
        }

        /* æŒ‡å®šï¼šæŠŠç½‘ç›˜/åœ¨çº¿/BT ä¸‰æŒ‰é’®å­—ä½“è®¾ä¸º LXGW WenKai TCï¼ˆæ ‡é¢˜ä¸å—å½±å“ï¼‰ */
        .category-btn{
            min-width:86px;
            padding:10px 22px;
            font-size:1.01rem;
            border-radius:22px;
            background:rgba(40,44,60,0.45);
            color:var(--primary);
            border:none;
            cursor:pointer;
            font-weight:600;
            transition:background 0.18s, color 0.18s, transform 0.14s;
            outline:2px solid transparent;
            font-family:"LXGW WenKai TC", system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
        }
        .category-btn:hover{
            background:var(--button-hover);
            color:var(--accent);
            transform:translateY(-2px) scale(1.03);
        }
        .category-btn.active{
            background:rgba(255,86,48,0.5);
            color:var(--background);
            outline:2px solid var(--fixed);
        }

        .grid-wrapper{
            width:100%;
            position:relative;
            margin-bottom:8px;
            margin-top:8px;
            min-height:150px;
            display:block;
        }

        .site-grid{
            width:100%;
            display:grid;
            grid-template-columns:repeat(auto-fill,minmax(180px,1fr));
            gap:22.2px 8.8px;
            justify-items:center;
            align-items:start;
            margin-bottom:0;
            min-height:150px;
            transition:opacity 220ms ease, transform 220ms ease;
            position:relative;
            z-index:1;
        }

        .site-grid.faded{opacity:0; pointer-events:none;}

        .site-card{
            background:rgba(28,30,38,0.56);
            border-radius:17px;
            box-shadow:0 2px 8px rgba(2,4,8,0.6);
            padding:17.8px 22.6px;
            width:80.75%;
            min-height:76px;
            display:flex;
            flex-direction:column;
            align-items:center;
            position:relative;
            cursor:pointer;
            transition:transform 0.3s ease, box-shadow 0.2s ease;
        }
        .site-card:hover{
            transform:scale(1.05);
            box-shadow:0 10px 25px rgba(0,0,0,0.45);
        }

        .site-name{
            font-weight:600;
            margin-bottom:13px;
            text-align:center;
            background:none;
            border:none;
            color:inherit;
            cursor:pointer;
            transition:color .17s;
            font-size:1.296rem;
            text-decoration:none;
            display:inline-block;
            padding:0;
        }
        .site-name:hover{ color:var(--accent); text-decoration:underline; }

        .backup-link-btn, .backup-none-btn{
            padding:7px 16px;
            font-size:0.97rem;
            border:2px solid rgba(255,107,61,0.25);
            border-radius:13px;
            background:transparent;
            color:var(--accent);
            outline:none;
            cursor:pointer;
            transition:background 0.2s, color 0.15s, border-color 0.17s;
            text-decoration:none;
            display:inline-block;
            margin-top:6px;
        }
        .backup-link-btn:hover, .backup-none-btn:hover{
            background:var(--accent);
            color:var(--background);
            border-color:var(--fixed);
            transform:translateY(-2px) scale(1.04);
        }
        .backup-none-btn{ color:#b6b2b2; border-color:rgba(255,107,61,0.22); }

        .emby-box{
            position:absolute;
            inset:0;
            display:none;
            z-index:2;
            align-items:center;
            justify-content:center;
            padding:18px;
            box-sizing:border-box;
        }
        .emby-box .card{
            width:100%;
            max-width:980px;
            background:transparent;
            border-radius:0;
            border:none;
            padding:clamp(14px,2.2vw,28px);
            color:#f6f4f6;
            box-shadow:none;
            display:flex;
            flex-direction:column;
            gap:10px;
            text-align:left;
            font-size:clamp(1.13rem, 1.4vw, 1.21rem);
            line-height:1.55;
        }
        .emby-box h3{ margin:0; font-size:clamp(1.05rem,2.4vw,1.32rem); color:var(--accent); letter-spacing:0.6px; display: flex; justify-content: center;}
        .emby-box p{ margin:0; color:#d7d4d8; }
        .emby-box ul{ margin:0 0 0 1.2em; color:#d0cdd1; }
        .emby-box small{ color:#bcb8c0; }
        .emby-box.show{ display:flex; }

        @media screen and (max-width:900px){
            .site-grid{ grid-template-columns:repeat(auto-fill,minmax(160px,1fr)); }
            :root{ --title-width:clamp(220px,80%,680px); }
            .site-card{ padding:15.9px 21.5px; }
        }
        @media screen and (max-width:600px){
            header{ font-size:1.82rem; letter-spacing:2px; }
            .site-card{ padding:16px 14px; }
            .banner h2{ font-size:1rem; }
            .category-btn{ font-size:0.87rem; padding:8px 12px; }
            .site-grid{ gap:14.8px 10.4px; }
            :root{ --title-width:clamp(200px,90%,520px); }
        }

        .notes{
            display:flex;
            justify-content:center;
            align-items:center;
            width:100%;
            text-align:center;
            font-size:.98rem;
            color:#bfc2d4;
            margin-bottom:12px;
            margin-top:12px;
            line-height:1.7;
        }

        .centered-backup-btn{
            width:100%;
            text-align:center;
            margin:6px 0;
            display:flex;
            justify-content:center;
            align-items:center;
            gap:12px;
        }

        /* æŒ‡å®šï¼šEmbyæœ å’Œ OKå½±è§† ä¸¤ä¸ªå¤§æŒ‰é’®çš„å­—ä½“ä¹Ÿè®¾ä¸º LXGW WenKai TC */
        .backup-btn-large{
            padding:6.44px 14.8px;
            font-size:0.89rem;
            color:var(--accent);
            border:2px solid var(--accent);
            background:transparent;
            border-radius:28px;
            outline:none;
            cursor:pointer;
            transition:background 0.18s, color 0.18s;
            font-family:"LXGW WenKai TC", system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
        }
        .backup-btn-large:hover{ background:var(--accent); color:var(--background); }

        footer{
            margin-top:12px;
            width:100%;
            text-align:center;
            color:#98a0b8;
            font-size:1rem;
            padding:18px 0 13px 0;
            letter-spacing:1px;
        }
        footer a{ color:var(--accent); text-decoration:none; margin-left:10px; }

        ::-webkit-scrollbar{ width:8px; background:rgba(0,0,0,0.1); }
        ::-webkit-scrollbar-thumb{ background:rgba(255,255,255,0.06); border-radius:6px; }

        @media (prefers-reduced-motion:reduce){ #starfield{ will-change:auto; } }
    </style>
</head>
<body>
    <canvas id="starfield" aria-hidden="true"></canvas>

    <div class="container">
        <header class="title-box">ä¸æƒ³çœ‹ç‰‡</header>

        <div class="banner">
            <h2 class="title-box">ä¼˜é€‰å…¨çƒå½±è§†èµ„æº</h2>
        </div>

        <div class="category-btns">
            <button class="category-btn" id="btn-pan" onclick="switchCategory('pan')">ç½‘ç›˜</button>
            <button class="category-btn active" id="btn-online" onclick="switchCategory('online')">åœ¨çº¿</button>
            <button class="category-btn" id="btn-bt" onclick="switchCategory('bt')">BT</button>
        </div>

        <div class="grid-wrapper">
            <div class="site-grid" id="siteGrid"></div>

            <div id="embyBox" class="emby-box" aria-hidden="true">
                <div id="embyCard" class="card" role="region" aria-label="æµ®å±‚è¯´æ˜" tabindex="-1">
                    <h3>Embyæœ</h3>
                    <p>å¦‚æœä½ åŒå€¦äº†è§†é¢‘ç½‘ç«™å¤šå…ƒçš„å¹¿å‘Šå’Œæ¨¡ç³Šä¸æ¸…çš„ç”»è´¨ï¼ŒEmbyæœä¼šæ˜¯ä¸é”™çš„é€‰æ‹©ã€‚<br>
                    Embyæœå¯å¤§è‡´åˆ†ä¸ºä»¥ä¸‹ä¸¤ç±»ï¼š</p>
                    <ul>
                        <li>å…¬ç›Šæœï¼šæ— éœ€ä»˜è´¹ï¼Œä½†å¯èƒ½æœ‰ä¸€å®šå…¥æœé—¨æ§›</li><a href="https://intro.bgp.yt/" style="color: #9e9eff;" target="_blank" rel="noopener noreferrer">äºŒæ¬¡å…ƒEmby</a>ã€<a href="https://t.me/embyxk" style="color: #9e9eff;" target="_blank" rel="noopener noreferrer">å…¬ç›Šæœæ˜Ÿç©ºæŒ‡å—</a>ã€<a href="https://t.me/FreeEmbyGuide" style="color: #9e9eff;" target="_blank" rel="noopener noreferrer">å…¬ç›Šä¸å®Œå…¨æŒ‡åŒ—</a>
                        <li>ä»˜è´¹æœï¼šéœ€è¦ä»˜è´¹ï¼Œä½†æœåŠ¡ä¼šç›¸å¯¹æ¯”è¾ƒç¨³å®š</li><a href="https://plan.emby.moe/" style="color: #9e9eff;" target="_blank" rel="noopener noreferrer">1111Emby</a>ã€<a href="https://micu.hk/archives/emby-users" style="color: #9e9eff;" target="_blank" rel="noopener noreferrer">MICU</a>ã€<a  href="https://t.me/Emby_Navigation" style="color: #9e9eff;" target="_blank" rel="noopener noreferrer">ä»˜è´¹Embyå¯¼èˆª</a>
                    </ul>
                    <p>å…¥æœåï¼Œé€‰ä¸€ä¸ªä½ ä¸­æ„çš„ <a href="https://emby.wiki/zh/å®¢æˆ·ç«¯é€‰æ‹©" style="color:#9e9eff;" target="_blank" rel="noopener noreferrer">å®¢æˆ·ç«¯</a>ï¼Œå¡«å…¥çº¿è·¯å’Œè´¦æˆ·å¯†ç åï¼Œå³å¯è§‚çœ‹é«˜æ¸…æ— å¹¿å‘Šçš„å½±ç‰‡äº†ã€‚</p>
                        <ul><li>è¯¦ç»†æ•™ç¨‹è¯·è®¿é—®ï¼š<a href="https://emby.wiki/zh/home" style="color:#9e9eff;" target="_blank" rel="noopener noreferrer">emby.wiki</a></li></ul>
                    <p>æ³¨æ„äº‹é¡¹ï¼š</p>
                    <ul>
                        <li>è´­ä¹°å‰ç¡®ä¿ä½ å¯ä»¥è®¿é—®ç›¸å…³Embyæœçº¿è·¯ï¼Œæˆ–å’¨è¯¢æœä¸»çº¿è·¯æ˜¯å¦å¯ä»¥ç›´è¿</li>
                        <li>æ–‡ä¸­æåˆ°çš„Embyæœä»…ä½œä¸ºç¤ºä¾‹å±•ç¤ºï¼Œä¸æ˜¯å¹¿å‘Šï¼Œè·‘è·¯ç®—ä½ å€’éœ‰</li>
                    </ul>
                </div>
            </div>

            <template id="okTemplate">
                <h3>OKå½±è§†</h3>
                <p>OKå½±è§†ä½¿ç”¨èµ·æ¥å’ŒEmbyå·®ä¸å¤šï¼Œä¸€èˆ¬åœ¨å®¢æˆ·ç«¯å¡«å†™å¥½é…ç½®æ¥å£çš„åœ°å€å°±å¯ä»¥äº†ã€‚</p>
                <ul>
                    <li><a href="https://blog.ccino.org/p/tvbox-tv-version-installation-and-configuration-complete-guide/" target="_blank" rel="noopener noreferrer" style="color: #9e9eff;">TVBoxç”µè§†ç‰ˆå®‰è£…é…ç½®å…¨æŒ‡å—</a></li>
                    <li><a href="https://t.me/tvb_ys" target="_blank" rel="noopener noreferrer" style="color: #9e9eff;">TVB/å½±è¦–(OK) ç”µæŠ¥é¢‘é“</li>
                    <li><a href="https://github.com/qist/tvbox" target="_blank" rel="noopener noreferrer" style="color: #9e9eff;">OKå½±è§†å„ç§å®¢æˆ·ç«¯å’Œé…ç½®æ¥å£</a></li>
                    <li><a href="https://www.é¥­å¤ªç¡¬.com" target="_blank" rel="noopener noreferrer" style="color: #9e9eff;">é¥­å¤ªç¡¬é…ç½®æ¥å£å¯¼èˆª</a></li>
                </ul>
            </template>
        </div>

        <div class="notes">
            <li>
                æ³¨ï¼šEE3 é‚€è¯·ç ï¼š<a style="color: #9e9eff;" >FMHY</a> æ¨èä½¿ç”¨ <a href="https://4get.canine.tools/web?s=Vivaldiæµè§ˆå™¨" target="_blank" style="color:#9e9eff;">Braveæµè§ˆå™¨</a> ç§‘å­¦è®¿é—®
                <br>å¤‡ä»½ç½‘å€ï¼š<a href="https://www.bxkp.org" target="_blank" style="color:#9e9eff;">www</a>ã€<a href="https://v.bxkp.org" target="_blank" style="color:#9e9eff;">Vercel</a>
            </li>
        </div>

        <div class="centered-backup-btn">
            <button id="embyBtn" class="backup-btn-large" data-type="emby" onclick="toggleInfo('emby')">Embyæœ</button>
            <button id="okBtn" class="backup-btn-large" data-type="ok" onclick="toggleInfo('ok')">OKå½±è§†</button>
        </div>

        <footer>
            Made with â¤ï¸
            <a href="https://github.com/kanpianer/pianer" target="_blank">Github</a>
            <a href="https://app.affine.pro/workspace/43839213-da83-415f-98f9-204fcd910d54/8UjZEIrLtL-PHOqZwH7b4" target="_blank">ç½‘ç«™å¤‡ä»½</a>
        </footer>
    </div>

<script>
    const SITES = [
        { name: "å‚é•¿èµ„æº", main_url: "https://www.czzymovie.com/", backup_url: "https://www.czzy.site/", tags: ["åœ¨çº¿", "BT"] },
        { name: "NOè§†é¢‘", main_url: "https://www.novipnoad.cc/", backup_url: "https://findno.tv/", tags: ["åœ¨çº¿"] },
        { name: "ä¸¤ä¸ªBT", main_url: "https://www.bttwo.me", backup_url: "https://bttwo.vip/", tags: ["åœ¨çº¿", ""] },
        { name: "ä¿®ç½—å½±è§†", main_url: "https://xl01.com.de/", backup_url: "https://xlys.me/", tags: ["åœ¨çº¿", "BT"] },
        { name: "è§‚å½± GYING", main_url: "https://gyg.la/", backup_url: "https://gyg.si/", tags: ["ç½‘ç›˜", "BT", "åœ¨çº¿"] },
        { name: "GoPlay", main_url: "https://goplay.su/", backup_url: "https://discord.com/invite/yY2P3DQR8S", tags: ["åœ¨çº¿"] },
        { name: "è¶£ç›˜/ä¸ƒç±³è“", main_url: "https://pan.mediy.cn", backup_url: "https://al.chirmyram.com", tags: ["åœ¨çº¿"] },
        { name: "ç©å¶å“¥å“¥", main_url: "https://www.wogg.one", backup_url: "", tags: ["ç½‘ç›˜"] },
        { name: "è€K", main_url: "https://docs.qq.com/doc/DTk5EaVdWY2R6ZnBk", backup_url: "", tags: ["ç½‘ç›˜"] },
        { name: "PanHub", main_url: "https://www.panhub.com.cn", backup_url: "", tags: ["ç½‘ç›˜"] },
        { name: "æ··åˆç›˜", main_url: "https://hunhepan.com/search", backup_url: "https://hhp.panso.me", tags: ["ç½‘ç›˜"] },
        { name: "PanSearch", main_url: "https://pansearch.me/", backup_url: "", tags: ["ç½‘ç›˜"] },
        { name: "çˆ±ç›¼", main_url: "https://www.aipan.me", backup_url: "", tags: ["ç½‘ç›˜"] },
        { name: "é˜¿é‡Œäº‘èµ„æº", main_url: "https://slowread.net/", backup_url: "", tags: ["ç½‘ç›˜"] },
        { name: "ShowBox", main_url: "https://www.showbox.media/", backup_url: "", tags: ["ç½‘ç›˜"] },
        { name: "AGEåŠ¨æ¼«", main_url:"https://www.agedm.io/", backup_url:"https://www.age.tv/", tags:["åœ¨çº¿"]},
        { name: "EE3", main_url: "https://ee3.me/", backup_url: "https://rips.cc/", tags: ["åœ¨çº¿"] },
        { name: "Cineby", main_url:"https://www.cineby.gd/", backup_url:"https://www.fmovies.gd/", tags:["åœ¨çº¿"]},
        { name: "Cinemaos", main_url: "https://cinemaos.live", backup_url: "https://discord.com/invite/38yFnFCJnA", tags: ["åœ¨çº¿"] },
        { name: "BrocoFlix", main_url:"https://brocoflix.xyz/", backup_url:"https://rentry.co/KipsSites", tags:["åœ¨çº¿"]},
        { name: "BEECH", main_url: "https://www.beech.watch", backup_url: "https://mocine.cam/", tags: ["åœ¨çº¿"] },
        { name: "Mapple", main_url:"https://mapple.mov/", backup_url:"https://mapple.site/", tags:["åœ¨çº¿"]},
        { name: "P-Stream", main_url:"https://pstream.mov", backup_url:"https://discord.com/invite/jZ6kkzADWS", tags:["åœ¨çº¿"]},
        { name: "BTä¹‹å®¶", main_url: "https://1lou.one/", backup_url: "https://1lou.cc/", tags: ["BT", "ç½‘ç›˜"] },
        { name: "ç£åŠ›ç†Š", main_url: "https://www.cilixiong.org", backup_url: "https://www.cilixiong.cc", tags: ["BT"] },
        { name: "ç£åŠ›å¸", main_url: "https://cldcld.cc", backup_url: "https://cldcld.top", tags: ["BT"] },
        { name: "1337X", main_url: "https://1337x.to/", backup_url: "https://1337x-status.org/", tags: ["BT"] },
        { name: "YTS", main_url: "https://yts.mx/", backup_url: "https://gosites.org/yts", tags: ["BT"] },
        { name: "EXT", main_url: "https://ext.to/", backup_url: "", tags: ["BT"] },
        { name: "BDigg", main_url: "https://btdig.com/", backup_url: "", tags: ["BT"] },
        { name: "Knaben", main_url: "https://knaben.org/", backup_url: "http://knabenxyzjl3bt5al7awroewfkg37x6duutapjytdib4w42mk2kiqpid.onion/", tags: ["BT"] },
        { name: "iDope", main_url: "https://idope.hair", backup_url: "", tags: ["BT"] },
        { name: "ACG.RIP", main_url: "https://acg.rip", backup_url: "", tags: ["BT"] },
        { name: "LimeTorrents", main_url: "https://www.limetorrents.asia", backup_url: "https://limetorrent.si/", tags: ["BT"] },
        { name: "ExtraTorrent", main_url: "https://extratorrent.st", backup_url: "", tags: ["BT"] },
    ];

    let currentCategory = 'online';
    let infoActive = false;
    let currentInfoType = null;

    function switchCategory(category) {
        currentCategory = category;
        ['online','pan','bt'].forEach(c => {
            const el = document.getElementById(`btn-${c}`);
            if (el) el.classList.toggle('active', c === category);
        });
        if (infoActive) {
            hideInfo(false);
        }
        renderGrid();
    }

    function renderGrid() {
        const grid = document.getElementById("siteGrid");
        grid.innerHTML = '';
        let matchTag;
        if (currentCategory === "online") matchTag = "åœ¨çº¿";
        if (currentCategory === "pan") matchTag = "ç½‘ç›˜";
        if (currentCategory === "bt") matchTag = "BT";
        const filtered = SITES.filter(site => site.tags.includes(matchTag));
        filtered.forEach(site => {
            const card = document.createElement("div");
            card.className = 'site-card';
            card.onclick = function() { window.open(site.main_url, "_blank"); };
            const link = document.createElement('a');
            link.className = 'site-name';
            link.textContent = site.name;
            link.href = site.main_url;
            link.target = '_blank';
            link.rel = 'noopener noreferrer';
            link.addEventListener('click', function(event) { event.stopPropagation(); });
            card.appendChild(link);
            if (site.backup_url && site.backup_url.trim().length > 0) {
                const backupLink = document.createElement('a');
                backupLink.className = "backup-link-btn";
                backupLink.textContent = "å¤‡ä»½ç½‘å€";
                backupLink.href = site.backup_url;
                backupLink.target = '_blank';
                backupLink.rel = 'noopener noreferrer';
                backupLink.addEventListener('click', (event) => { event.stopPropagation(); });
                card.appendChild(backupLink);
            } else {
                const backupNoneLink = document.createElement('a');
                backupNoneLink.className = "backup-none-btn";
                backupNoneLink.textContent = "æ²¡æœ‰å¤‡ä»½";
                backupNoneLink.href = "https://app.affine.pro/workspace/43839213-da83-415f-98f9-204fcd910d54/8UjZEIrLtL-PHOqZwH7b4";
                backupNoneLink.target = '_blank';
                backupNoneLink.rel = 'noopener noreferrer';
                backupNoneLink.addEventListener('click', (event) => { event.stopPropagation(); });
                card.appendChild(backupNoneLink);
            }
            grid.appendChild(card);
        });
    }

    renderGrid();

    const embyCardEl = document.getElementById('embyCard');
    const originalEmbyHTML = embyCardEl ? embyCardEl.innerHTML : '';

    function toggleInfo(type) {
        if (!infoActive || currentInfoType !== type) {
            showInfo(type);
        } else {
            hideInfo(true);
        }
    }

    function showInfo(type) {
        const grid = document.getElementById('siteGrid');
        const embyBox = document.getElementById('embyBox');
        const embyCardEl = document.getElementById('embyCard');
        if (!embyBox || !embyCardEl) return;
        if (type === 'emby') {
            embyCardEl.innerHTML = originalEmbyHTML;
            embyCardEl.setAttribute('aria-label', 'Embyæœè¯´æ˜');
        } else if (type === 'ok') {
            const tpl = document.getElementById('okTemplate');
            if (tpl) {
                embyCardEl.innerHTML = tpl.innerHTML;
                embyCardEl.setAttribute('aria-label', 'OKå½±è§†è¯´æ˜');
            } else {
                embyCardEl.innerHTML = '<h3>OKå½±è§†</h3><p>OKå½±è§†è¯´æ˜æ–‡å­—</p>';
            }
        }
        embyBox.classList.add('show');
        embyBox.setAttribute('aria-hidden', 'false');
        grid.classList.add('faded');

        const isMobile = window.matchMedia && window.matchMedia('(max-width: 900px)').matches;
        setTimeout(() => {
            try {
                if (isMobile) {
                    const rect = embyCardEl.getBoundingClientRect();
                    const scrollY = window.scrollY || window.pageYOffset || document.documentElement.scrollTop || 0;
                    const targetTop = Math.max(0, Math.floor(scrollY + rect.top - 12));
                    window.scrollTo({ top: targetTop, behavior: 'smooth' });
                }
                embyCardEl.setAttribute('tabindex', '-1');
                embyCardEl.focus && embyCardEl.focus({ preventScroll: true });
            } catch (e) {
                try { embyCardEl.focus && embyCardEl.focus(); } catch (err) {}
            }
        }, 60);
        infoActive = true;
        currentInfoType = type;
    }

    function hideInfo(hideWithAnimation = true) {
        const grid = document.getElementById('siteGrid');
        const embyBox = document.getElementById('embyBox');
        const embyCardEl = document.getElementById('embyCard');
        if (!embyBox || !embyCardEl) return;
        embyBox.classList.remove('show');
        embyBox.setAttribute('aria-hidden', 'true');
        if (hideWithAnimation) {
            requestAnimationFrame(() => { grid.classList.remove('faded'); });
        } else {
            grid.classList.remove('faded');
        }
        try {
            const embyBtn = document.getElementById('embyBtn');
            const okBtn = document.getElementById('okBtn');
            if (currentInfoType === 'ok' && okBtn) okBtn.focus({ preventScroll: true });
            else if (embyBtn) embyBtn.focus({ preventScroll: true });
        } catch (e) {
            try { document.getElementById('embyBtn') && document.getElementById('embyBtn').focus(); } catch(err){}
        }
        infoActive = false;
        currentInfoType = null;
    }

    const embyBtnEl = document.getElementById('embyBtn');
    const okBtnEl = document.getElementById('okBtn');
    if (embyBtnEl) {
        embyBtnEl.addEventListener('keydown', function(e){
            if(e.key === 'Enter' || e.key === ' ') {
                e.preventDefault();
                toggleInfo('emby');
            }
        });
    }
    if (okBtnEl) {
        okBtnEl.addEventListener('keydown', function(e){
            if(e.key === 'Enter' || e.key === ' ') {
                e.preventDefault();
                toggleInfo('ok');
            }
        });
    }
</script>

<script>
(function() {
    const canvas = document.getElementById('starfield');
    if (!canvas) return;
    const ctx = canvas.getContext('2d', { alpha: true });

    let stars = [];
    let meteors = [];
    let width = 0, height = 0, dpr = 1;
    const MAX_STARS = 400;
    const REDUCE_MOTION = window.matchMedia && window.matchMedia('(prefers-reduced-motion: reduce)').matches;

    function rand(min, max) { return min + Math.random() * (max - min); }

    function generateStars() {
        stars = [];
        const vw = Math.max(1, window.innerWidth);
        const vh = Math.max(1, window.innerHeight);
        const area = vw * vh;
        let count = Math.round(Math.min(MAX_STARS, Math.max(120, area / 20000)));
        for (let i = 0; i < count; i++) {
            const sizeRand = Math.pow(Math.random(), 1.6);
            const radius = 0.4 + sizeRand * 3.8;
            const temp = Math.random();
            let color;
            if (temp < 0.12) color = [255, 230, 200];
            else if (temp < 0.72) color = [245, 250, 255];
            else color = [200, 220, 255];
            stars.push({
                x: Math.random() * vw,
                y: Math.random() * vh,
                r: radius,
                baseAlpha: 0.25 + Math.random() * 0.85,
                twinkleSpeed: 0.5 + Math.random() * 2.0,
                phase: Math.random() * Math.PI * 2,
                rotation: Math.random() * Math.PI * 2,
                color: color,
                driftX: (Math.random() - 0.5) * 0.02,
                driftY: (Math.random() - 0.5) * 0.01,
                layer: Math.random() < 0.08 ? 'bright' : (Math.random() < 0.12 ? 'medium' : 'small')
            });
        }
    }

    function resizeCanvas() {
        dpr = window.devicePixelRatio || 1;
        canvas.style.width = window.innerWidth + 'px';
        canvas.style.height = window.innerHeight + 'px';
        canvas.width = Math.max(1, Math.floor(window.innerWidth * dpr));
        canvas.height = Math.max(1, Math.floor(window.innerHeight * dpr));
        ctx.setTransform(dpr, 0, 0, dpr, 0, 0);
        width = window.innerWidth;
        height = window.innerHeight;
        generateStars();
        meteors = [];
        draw(0);
    }

    function drawStar(s, t) {
        const tw = 0.5 + 0.5 * Math.sin(s.phase + t * s.twinkleSpeed * 1.4);
        const alpha = Math.max(0, Math.min(1, s.baseAlpha * (0.22 + 1.6 * tw)));
        const rScale = 1 + 0.35 * Math.sin(s.phase * 1.3 + t * s.twinkleSpeed * 1.2);
        const drawR = Math.max(0.25, s.r * rScale);

        const glowR = Math.max(6, drawR * 6 + (s.layer === 'bright' ? 6 : 0));
        const grd = ctx.createRadialGradient(s.x, s.y, 0, s.x, s.y, glowR);
        const [cr, cg, cb] = s.color;
        grd.addColorStop(0, `rgba(${cr},${cg},${cb},${Math.min(1, alpha * 1.0)})`);
        grd.addColorStop(0.25, `rgba(${Math.round((cr+240)/2)},${Math.round((cg+245)/2)},${Math.round((cb+255)/2)},${alpha*0.35})`);
        grd.addColorStop(1, `rgba(0,0,0,0)`);
        ctx.fillStyle = grd;
        ctx.beginPath();
        ctx.arc(s.x, s.y, glowR, 0, Math.PI * 2);
        ctx.fill();

        ctx.beginPath();
        ctx.fillStyle = `rgba(255,255,255,${Math.min(1, alpha*1.2)})`;
        ctx.arc(s.x, s.y, Math.max(0.3, drawR*0.6), 0, Math.PI * 2);
        ctx.fill();

        if (s.layer === 'bright' && drawR > 2.2) {
            ctx.save();
            ctx.translate(s.x, s.y);
            ctx.rotate((s.phase + t*0.1) % (Math.PI*2));
            ctx.globalAlpha = Math.min(0.12, alpha*0.6);
            ctx.fillStyle = 'rgba(255,255,255,0.06)';
            ctx.fillRect(-drawR*8, -drawR*0.6, drawR*16, drawR*1.2);
            ctx.fillRect(-drawR*0.6, -drawR*8, drawR*1.2, drawR*16);
            ctx.restore();
        }
    }

    function spawnMeteor() {
        const startX = Math.random() < 0.6 ? Math.random() * width * 0.6 : Math.random() * width;
        const startY = Math.random() * height * 0.5;
        const len = 90 + Math.random()*220;
        const angle = (Math.PI*0.15) + Math.random()*0.5;
        const speed = 400 + Math.random()*600;
        meteors.push({
            x: startX,
            y: startY,
            vx: Math.cos(angle) * speed,
            vy: Math.sin(angle) * speed,
            length: len,
            life: 0,
            ttl: 0.5 + Math.random()*0.9,
            shine: 0.8 + Math.random()*0.6
        });
    }

    function drawMeteors(dt) {
        if (Math.random() < 0.006) spawnMeteor();
        for (let i = meteors.length - 1; i >= 0; i--) {
            const m = meteors[i];
            m.life += dt;
            if (m.life > m.ttl) { meteors.splice(i, 1); continue; }
            const t = m.life / m.ttl;
            const x = m.x + m.vx * (m.life);
            const y = m.y + m.vy * (m.life);
            ctx.save();
            ctx.globalCompositeOperation = 'lighter';
            const grad = ctx.createLinearGradient(x, y, x - m.vx*0.01, y - m.vy*0.01);
            grad.addColorStop(0, `rgba(255,255,255,${m.shine * (1 - t)})`);
            grad.addColorStop(1, `rgba(255,200,150,${0.0})`);
            ctx.strokeStyle = grad;
            ctx.lineWidth = Math.max(1, 2.4 * (1 - t));
            ctx.beginPath();
            ctx.moveTo(x, y);
            ctx.lineTo(x - m.vx * 0.02, y - m.vy * 0.02);
            ctx.stroke();

            ctx.beginPath();
            ctx.fillStyle = `rgba(255,255,255,${0.9*(1-t)})`;
            ctx.arc(x, y, Math.max(0.8, 2.6*(1-t)), 0, Math.PI*2);
            ctx.fill();
            ctx.restore();
        }
    }

    let lastTime = performance.now();
    function draw(now) {
        const t = (now || 0) / 1000;
        const dt = Math.min(0.033, (now - lastTime) / 1000);
        lastTime = now;

        ctx.clearRect(0, 0, width, height);

        const bg = ctx.createLinearGradient(0, 0, 0, height);
        bg.addColorStop(0, 'rgba(2,3,10,1)');
        bg.addColorStop(0.5, 'rgba(6,10,18,1)');
        bg.addColorStop(1, 'rgba(0,0,6,1)');
        ctx.fillStyle = bg;
        ctx.fillRect(0,0,width,height);

        for (let i = 0; i < stars.length; i++) {
            const s = stars[i];
            const wobbleX = Math.sin(t * 0.02 * (1 + (s.r%3))) * (s.driftX * 20);
            const wobbleY = Math.cos(t * 0.02 * (1 + (s.r%2))) * (s.driftY * 10);
            s.x = (s.x + wobbleX + width) % width;
            s.y = (s.y + wobbleY + height) % height;
            drawStar(s, t);
        }

        if (!REDUCE_MOTION) drawMeteors(dt);

        if (!REDUCE_MOTION) {
            requestAnimationFrame(draw);
        }
    }

    resizeCanvas();
    window.addEventListener('resize', () => {
        clearTimeout(window._starResizeTimeout);
        window._starResizeTimeout = setTimeout(resizeCanvas, 120);
    });

    if (!REDUCE_MOTION) {
        requestAnimationFrame(draw);
        if (window.matchMedia) {
            const mq = window.matchMedia('(prefers-reduced-motion: reduce)');
            mq.addEventListener && mq.addEventListener('change', e => {
                if (e.matches) {
                    draw(0);
                } else {
                    requestAnimationFrame(draw);
                }
            });
        }
    } else {
        draw(0);
    }

})();
</script>

</body>
</html>
